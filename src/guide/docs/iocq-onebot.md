---
title: onebot协议发送QQ消息
author: bincooo
---

#### 环境

>FastGPT version: [V4.8](https://github.com/labring/FastGPT/releases/tag/v4.8)



#### 说明

用于给QQ群组发送消息

[icon](https://github.com/bincooo/vuepress-doc/assets/36452456/d7cdbf64-bab1-402a-89a3-20cc8450be0f)

<img width="392" alt="Screenshot 2024-05-06 at 21 53 11" src="https://github.com/bincooo/vuepress-doc/assets/36452456/6e3b56ca-0dac-4259-b1db-1457d0509964">



#### 数据导入

```json
{"nodes":[{"nodeId":"1zx8dujqgc3l","name":"定义插件输入","intro":"自定义配置外部输入，使用插件时，仅暴露自定义配置的输入","avatar":"/imgs/workflow/input.png","flowNodeType":"pluginInput","showStatus":false,"position":{"x":-144.9797876285262,"y":836.7961849913729},"inputs":[{"key":"groupId","valueType":"string","label":"QQ群号","type":"input","required":true,"description":"QQ群组号码","edit":true,"editField":{"key":true,"name":true,"description":true,"required":true,"dataType":true,"inputType":true,"isToolInput":true},"connected":true,"selectedTypeIndex":0,"renderTypeList":["input"],"canEdit":true},{"key":"message","valueType":"any","label":"发送消息体","type":"target","required":true,"description":"群聊消息体[Array(Object)]\n例子：\n[\n  {\n    \"type\": \"text\",\n    \"data\": {\n      \"text\": \"hi\"\n    }\n  }\n]","toolDescription":"群聊消息体[Array(Object)]\n例子：\n[\n  {\n    \"type\": \"text\",\n    \"data\": {\n      \"text\": \"hi\"\n    }\n  }\n]","edit":true,"editField":{"key":true,"name":true,"description":true,"required":true,"dataType":true,"inputType":true,"isToolInput":true},"connected":true,"selectedTypeIndex":0,"renderTypeList":["reference"],"canEdit":true}],"outputs":[{"id":"groupId","type":"static","key":"groupId","valueType":"string","label":"QQ群号","canEdit":true},{"id":"message","type":"static","key":"message","valueType":"any","label":"发送消息体","canEdit":true}]},{"nodeId":"a2h9av23sxte","name":"定义插件输出","intro":"自定义配置外部输出，使用插件时，仅暴露自定义配置的输出","avatar":"/imgs/workflow/output.png","flowNodeType":"pluginOutput","showStatus":false,"position":{"x":-120.78431161264513,"y":1194.0934574391574},"inputs":[],"outputs":[]},{"nodeId":"7b6iNY8vMoK7","name":"消息体解析","intro":"可以发出一个 HTTP 请求，实现更为复杂的操作（联网搜索、数据库查询等）","avatar":"/imgs/workflow/http.png","flowNodeType":"httpRequest468","showStatus":true,"position":{"x":491.088774306401,"y":599.8451800437347},"inputs":[{"key":"system_addInputParam","renderTypeList":["addInputParam"],"valueType":"dynamic","label":"","required":false,"description":"core.module.input.description.HTTP Dynamic Input","editField":{"key":true,"valueType":true}},{"key":"message","valueType":"string","label":"message","renderTypeList":["reference"],"description":"","canEdit":true,"editField":{"key":true,"valueType":true},"value":["1zx8dujqgc3l","message"]},{"key":"system_httpMethod","renderTypeList":["custom"],"valueType":"string","label":"","value":"POST","required":true},{"key":"system_httpReqUrl","renderTypeList":["hidden"],"valueType":"string","label":"","description":"core.module.input.description.Http Request Url","placeholder":"https://api.ai.com/getInventory","required":false,"value":"http://proxy.io:8888/laf/eval"},{"key":"system_httpHeader","renderTypeList":["custom"],"valueType":"any","value":[{"key":"Content-Type","type":"string","value":"text/plain"}],"label":"","description":"core.module.input.description.Http Request Header","placeholder":"core.module.input.description.Http Request Header","required":false},{"key":"system_httpParams","renderTypeList":["hidden"],"valueType":"any","value":[],"label":"","required":false},{"key":"system_httpJsonBody","renderTypeList":["hidden"],"valueType":"any","value":"const message = \"{{message}}\"\ntry {\n  return JSON.parse(message)\n} catch(e) {\n  return message\n}","label":"","required":false}],"outputs":[{"id":"system_addOutputParam","key":"system_addOutputParam","type":"dynamic","valueType":"dynamic","label":"","editField":{"key":true,"valueType":true}},{"id":"httpRawResponse","key":"httpRawResponse","label":"原始响应","description":"HTTP请求的原始响应。只能接受字符串或JSON类型响应数据。","valueType":"any","type":"static"},{"id":"o3GfKTUAnSUo","type":"dynamic","key":"result","valueType":"any","label":"result"}]},{"nodeId":"5CLYpwUUquIr","name":"发送消息","intro":"可以发出一个 HTTP 请求，实现更为复杂的操作（联网搜索、数据库查询等）","avatar":"/imgs/workflow/http.png","flowNodeType":"httpRequest468","showStatus":true,"position":{"x":1105.4914436585875,"y":558.0234441596556},"inputs":[{"key":"system_addInputParam","renderTypeList":["addInputParam"],"valueType":"dynamic","label":"","required":false,"description":"core.module.input.description.HTTP Dynamic Input","editField":{"key":true,"valueType":true}},{"key":"groupId","valueType":"string","label":"groupId","renderTypeList":["reference"],"description":"","canEdit":true,"editField":{"key":true,"valueType":true},"value":["1zx8dujqgc3l","groupId"]},{"key":"message","valueType":"any","label":"message","renderTypeList":["reference"],"description":"","canEdit":true,"editField":{"key":true,"valueType":true},"value":["7b6iNY8vMoK7","o3GfKTUAnSUo"]},{"key":"system_httpMethod","renderTypeList":["custom"],"valueType":"string","label":"","value":"POST","required":true},{"key":"system_httpReqUrl","renderTypeList":["hidden"],"valueType":"string","label":"","description":"core.module.input.description.Http Request Url","placeholder":"https://api.ai.com/getInventory","required":false,"value":"http://124.21.0.1:3000/send_group_msg"},{"key":"system_httpHeader","renderTypeList":["custom"],"valueType":"any","value":[{"key":"Content-Type","type":"string","value":"text/plain"}],"label":"","description":"core.module.input.description.Http Request Header","placeholder":"core.module.input.description.Http Request Header","required":false},{"key":"system_httpParams","renderTypeList":["hidden"],"valueType":"any","value":[],"label":"","required":false},{"key":"system_httpJsonBody","renderTypeList":["hidden"],"valueType":"any","value":"{\n  \"detail_type\": \"group\",\n  \"group_id\": \"{{groupId}}\",\n  \"message\": {{message}}\n}","label":"","required":false}],"outputs":[{"id":"system_addOutputParam","key":"system_addOutputParam","type":"dynamic","valueType":"dynamic","label":"","editField":{"key":true,"valueType":true}},{"id":"httpRawResponse","key":"httpRawResponse","label":"原始响应","description":"HTTP请求的原始响应。只能接受字符串或JSON类型响应数据。","valueType":"any","type":"static"},{"id":"o3GfKTUAnSUo","type":"dynamic","key":"result","valueType":"string","label":"result"}]}],"edges":[{"source":"1zx8dujqgc3l","target":"7b6iNY8vMoK7","sourceHandle":"1zx8dujqgc3l-source-right","targetHandle":"7b6iNY8vMoK7-target-left"},{"source":"7b6iNY8vMoK7","target":"5CLYpwUUquIr","sourceHandle":"7b6iNY8vMoK7-source-right","targetHandle":"5CLYpwUUquIr-target-left"}]}
```

其中，

http模块内的 `http://proxy.io:8888/laf/eval` 地址改为实际的 `apis` 服务地址

http模块内的 `http://124.21.0.1:3000/send_group_msg` 地址改为实际的iocq onebot服务地址
