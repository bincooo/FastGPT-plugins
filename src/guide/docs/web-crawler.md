---
title: 网站抓取
author: bincooo
---

#### 环境

>FastGPT version: [V4.8](https://github.com/labring/FastGPT/releases/tag/v4.8)
>
>Depend on:
>
>​       [REDIS SET](docs/redis-set.md)



#### 说明

用于抓取网站链接，内置过期时间1800s

[icon](https://github.com/lm-sys/FastChat/assets/36452456/4aab5b8e-3807-4f3c-82af-1a0bbdc6522f)

<img width="445" alt="Screenshot 2024-05-14 at 09 42 34" src="https://github.com/lm-sys/FastChat/assets/36452456/47f545cd-af66-4e20-a037-626bd93ff82b">



#### 数据导入

```json
{"nodes":[{"nodeId":"zpdabsjro3jl","name":"定义插件输入","intro":"自定义配置外部输入，使用插件时，仅暴露自定义配置的输入","avatar":"/imgs/workflow/input.png","flowNodeType":"pluginInput","showStatus":false,"position":{"x":-372.7783919295039,"y":1945.9152728100912},"inputs":[{"key":"url","valueType":"string","label":"链接地址","type":"target","required":true,"description":"网页链接地址","edit":true,"editField":{"key":true,"name":true,"description":true,"required":true,"dataType":true,"inputType":true,"isToolInput":true},"connected":true,"toolDescription":"网页链接地址","selectedTypeIndex":0,"renderTypeList":["reference"],"canEdit":true}],"outputs":[{"id":"url","type":"static","key":"url","valueType":"string","label":"链接地址","canEdit":true}]},{"nodeId":"24u067o1vh6c","name":"定义插件输出","intro":"自定义配置外部输出，使用插件时，仅暴露自定义配置的输出","avatar":"/imgs/workflow/output.png","flowNodeType":"pluginOutput","showStatus":false,"position":{"x":3688.1891985113225,"y":2656.167211511471},"inputs":[{"key":"data","valueType":"any","label":"data","renderTypeList":["reference"],"required":false,"description":"","canEdit":true,"editField":{"key":true,"description":true,"valueType":true},"value":["ajf6ylqLwekI","e4SLaTQ5UnXQ"]}],"outputs":[]},{"nodeId":"qUvHabyG2aHI","name":"key","intro":"可以发出一个 HTTP 请求，实现更为复杂的操作（联网搜索、数据库查询等）","avatar":"/imgs/workflow/http.png","flowNodeType":"httpRequest468","showStatus":true,"position":{"x":172.73964850798188,"y":1685.1445600300442},"inputs":[{"key":"system_addInputParam","renderTypeList":["addInputParam"],"valueType":"dynamic","label":"","required":false,"description":"core.module.input.description.HTTP Dynamic Input","editField":{"key":true,"valueType":true}},{"key":"url","valueType":"string","label":"url","renderTypeList":["reference"],"description":"","canEdit":true,"editField":{"key":true,"valueType":true},"value":["zpdabsjro3jl","url"]},{"key":"system_httpMethod","renderTypeList":["custom"],"valueType":"string","label":"","value":"POST","required":true},{"key":"system_httpReqUrl","renderTypeList":["hidden"],"valueType":"string","label":"","description":"core.module.input.description.Http Request Url","placeholder":"https://api.ai.com/getInventory","required":false,"value":"http://proxy.io:8888/laf/eval"},{"key":"system_httpHeader","renderTypeList":["custom"],"valueType":"any","value":[{"key":"Content-Type","type":"string","value":"text/plain"}],"label":"","description":"core.module.input.description.Http Request Header","placeholder":"core.module.input.description.Http Request Header","required":false},{"key":"system_httpParams","renderTypeList":["hidden"],"valueType":"any","value":[],"label":"","required":false},{"key":"system_httpJsonBody","renderTypeList":["hidden"],"valueType":"any","value":"const url = \\"{{url}}\\".replaceAll(\\".\\", \\"_\\")\nreturn \\"crawler-\\" + encodeURIComponent(url)","label":"","required":false}],"outputs":[{"id":"system_addOutputParam","key":"system_addOutputParam","type":"dynamic","valueType":"dynamic","label":"","editField":{"key":true,"valueType":true}},{"id":"httpRawResponse","key":"httpRawResponse","label":"原始响应","description":"HTTP请求的原始响应。只能接受字符串或JSON类型响应数据。","valueType":"any","type":"static"},{"id":"pQ4V0PyrcBda","type":"dynamic","key":"result","valueType":"string","label":"result"}]},{"nodeId":"kkJJWdghAlNP","name":"读取cache","intro":"可以发出一个 HTTP 请求，实现更为复杂的操作（联网搜索、数据库查询等）","avatar":"/imgs/workflow/http.png","flowNodeType":"httpRequest468","showStatus":true,"position":{"x":758.7141212638268,"y":1684.9140491519938},"inputs":[{"key":"system_addInputParam","renderTypeList":["addInputParam"],"valueType":"dynamic","label":"","required":false,"description":"core.module.input.description.HTTP Dynamic Input","editField":{"key":true,"valueType":true}},{"key":"key","valueType":"string","label":"key","renderTypeList":["reference"],"description":"","canEdit":true,"editField":{"key":true,"valueType":true},"value":["qUvHabyG2aHI","pQ4V0PyrcBda"]},{"key":"system_httpMethod","renderTypeList":["custom"],"valueType":"string","label":"","value":"POST","required":true},{"key":"system_httpReqUrl","renderTypeList":["hidden"],"valueType":"string","label":"","description":"core.module.input.description.Http Request Url","placeholder":"https://api.ai.com/getInventory","required":false,"value":"http://proxy.io:8888/redis"},{"key":"system_httpHeader","renderTypeList":["custom"],"valueType":"any","value":[{"key":"Content-Type","type":"string","value":"text/plain"}],"label":"","description":"core.module.input.description.Http Request Header","placeholder":"core.module.input.description.Http Request Header","required":false},{"key":"system_httpParams","renderTypeList":["hidden"],"valueType":"any","value":[],"label":"","required":false},{"key":"system_httpJsonBody","renderTypeList":["hidden"],"valueType":"any","value":"GET/{{key}}","label":"","required":false}],"outputs":[{"id":"system_addOutputParam","key":"system_addOutputParam","type":"dynamic","valueType":"dynamic","label":"","editField":{"key":true,"valueType":true}},{"id":"httpRawResponse","key":"httpRawResponse","label":"原始响应","description":"HTTP请求的原始响应。只能接受字符串或JSON类型响应数据。","valueType":"any","type":"static"},{"id":"kkLtD9B6NYQY","type":"dynamic","key":"GET","valueType":"string","label":"GET"}]},{"nodeId":"ajf6ylqLwekI","name":"route","intro":"可以发出一个 HTTP 请求，实现更为复杂的操作（联网搜索、数据库查询等）","avatar":"/imgs/workflow/http.png","flowNodeType":"httpRequest468","showStatus":true,"position":{"x":1338.1197249180836,"y":1661.972725801133},"inputs":[{"key":"system_addInputParam","renderTypeList":["addInputParam"],"valueType":"dynamic","label":"","required":false,"description":"core.module.input.description.HTTP Dynamic Input","editField":{"key":true,"valueType":true}},{"key":"data","valueType":"string","label":"data","renderTypeList":["reference"],"description":"","canEdit":true,"editField":{"key":true,"valueType":true},"value":["kkJJWdghAlNP","kkLtD9B6NYQY"]},{"key":"system_httpMethod","renderTypeList":["custom"],"valueType":"string","label":"","value":"POST","required":true},{"key":"system_httpReqUrl","renderTypeList":["hidden"],"valueType":"string","label":"","description":"core.module.input.description.Http Request Url","placeholder":"https://api.ai.com/getInventory","required":false,"value":"http://proxy.io:8888/laf/eval"},{"key":"system_httpHeader","renderTypeList":["custom"],"valueType":"any","value":[{"key":"Content-Type","type":"string","value":"text/plain"}],"label":"","description":"core.module.input.description.Http Request Header","placeholder":"core.module.input.description.Http Request Header","required":false},{"key":"system_httpParams","renderTypeList":["hidden"],"valueType":"any","value":[],"label":"","required":false},{"key":"system_httpJsonBody","renderTypeList":["hidden"],"valueType":"any","value":"let data = \\"{{data}}\\"\nif (!data || data == \\"null\\") {\n  return {\n    hvc: false\n  }\n}\n\n// data = decodeURIComponent(data)\nreturn {\n  hvc: true,\n  data: JSON.parse(data)\n}","label":"","required":false}],"outputs":[{"id":"system_addOutputParam","key":"system_addOutputParam","type":"dynamic","valueType":"dynamic","label":"","editField":{"key":true,"valueType":true}},{"id":"httpRawResponse","key":"httpRawResponse","label":"原始响应","description":"HTTP请求的原始响应。只能接受字符串或JSON类型响应数据。","valueType":"any","type":"static"},{"id":"pQ4V0PyrcBda","type":"dynamic","key":"result.hvc","valueType":"boolean","label":"result.hvc"},{"id":"e4SLaTQ5UnXQ","type":"dynamic","key":"result.data","valueType":"any","label":"result.data"}]},{"nodeId":"wK68Zr8qrB0w","name":"判断器","intro":"根据一定的条件，执行不同的分支。","avatar":"/imgs/workflow/ifElse.svg","flowNodeType":"ifElseNode","showStatus":true,"position":{"x":1210.0751566854854,"y":2605.3026619430184},"inputs":[{"key":"ifElseList","renderTypeList":["hidden"],"valueType":"any","label":"","value":[{"condition":"AND","list":[{"variable":["ajf6ylqLwekI","pQ4V0PyrcBda"],"condition":"equalTo","value":"true"}]}]}],"outputs":[{"id":"ifElseResult","key":"ifElseResult","label":"判断结果","valueType":"string","type":"static"}]},{"nodeId":"ci29O7VmVn5g","name":"抓取网页","intro":"可以发出一个 HTTP 请求，实现更为复杂的操作（联网搜索、数据库查询等）","avatar":"/imgs/workflow/http.png","flowNodeType":"httpRequest468","showStatus":true,"position":{"x":1342.8007987743008,"y":3052.761361680124},"inputs":[{"key":"system_addInputParam","renderTypeList":["addInputParam"],"valueType":"dynamic","label":"","required":false,"description":"core.module.input.description.HTTP Dynamic Input","editField":{"key":true,"valueType":true}},{"key":"url","valueType":"string","label":"url","renderTypeList":["reference"],"description":"","canEdit":true,"editField":{"key":true,"valueType":true},"value":["zpdabsjro3jl","url"]},{"key":"system_httpMethod","renderTypeList":["custom"],"valueType":"string","label":"","value":"POST","required":true},{"key":"system_httpReqUrl","renderTypeList":["hidden"],"valueType":"string","label":"","description":"core.module.input.description.Http Request Url","placeholder":"https://api.ai.com/getInventory","required":false,"value":"http://proxy.io:8888/firecrawl/v0/scrape"},{"key":"system_httpHeader","renderTypeList":["custom"],"valueType":"any","value":[],"label":"","description":"core.module.input.description.Http Request Header","placeholder":"core.module.input.description.Http Request Header","required":false},{"key":"system_httpParams","renderTypeList":["hidden"],"valueType":"any","value":[],"label":"","required":false},{"key":"system_httpJsonBody","renderTypeList":["hidden"],"valueType":"any","value":"{\n  \\"url\\": \\"{{url}}\\"\n}","label":"","required":false}],"outputs":[{"id":"system_addOutputParam","key":"system_addOutputParam","type":"dynamic","valueType":"dynamic","label":"","editField":{"key":true,"valueType":true}},{"id":"httpRawResponse","key":"httpRawResponse","label":"原始响应","description":"HTTP请求的原始响应。只能接受字符串或JSON类型响应数据。","valueType":"any","type":"static"},{"id":"j5yAPsQnvYZu","type":"dynamic","key":"data","valueType":"any","label":"data"}]},{"nodeId":"ijEgxCR04AVx","name":"抓取后置","intro":"可以发出一个 HTTP 请求，实现更为复杂的操作（联网搜索、数据库查询等）","avatar":"/imgs/workflow/http.png","flowNodeType":"httpRequest468","showStatus":true,"position":{"x":2143.4246100958894,"y":2987.5131724746743},"inputs":[{"key":"system_addInputParam","renderTypeList":["addInputParam"],"valueType":"dynamic","label":"","required":false,"description":"core.module.input.description.HTTP Dynamic Input","editField":{"key":true,"valueType":true}},{"key":"url","valueType":"string","label":"url","renderTypeList":["reference"],"description":"","canEdit":true,"editField":{"key":true,"valueType":true},"value":["zpdabsjro3jl","url"]},{"key":"data","valueType":"any","label":"data","renderTypeList":["reference"],"description":"","canEdit":true,"editField":{"key":true,"valueType":true},"value":["ci29O7VmVn5g","j5yAPsQnvYZu"]},{"key":"system_httpMethod","renderTypeList":["custom"],"valueType":"string","label":"","value":"POST","required":true},{"key":"system_httpReqUrl","renderTypeList":["hidden"],"valueType":"string","label":"","description":"core.module.input.description.Http Request Url","placeholder":"https://api.ai.com/getInventory","required":false,"value":"http://proxy.io:8888/laf/eval"},{"key":"system_httpHeader","renderTypeList":["custom"],"valueType":"any","value":[{"key":"Content-Type","type":"string","value":"text/plain"}],"label":"","description":"core.module.input.description.Http Request Header","placeholder":"core.module.input.description.Http Request Header","required":false},{"key":"system_httpParams","renderTypeList":["hidden"],"valueType":"any","value":[],"label":"","required":false},{"key":"system_httpJsonBody","renderTypeList":["hidden"],"valueType":"any","value":"let data = {\n  metadata,\n  markdown,\n} = {{data}} ?? {}\n\nif (!data.markdown) {\n  return {\n    data: \\"read failed.\\"\n  }\n}\n\ndata = {\n  url: \\"{{url}}\\",\n  title: metadata.title,\n  content: markdown,\n}\n\nconst str = JSON.stringify(data)\nreturn {\n  data: data,\n  edata: encodeURIComponent(str)\n}\n","label":"","required":false}],"outputs":[{"id":"system_addOutputParam","key":"system_addOutputParam","type":"dynamic","valueType":"dynamic","label":"","editField":{"key":true,"valueType":true}},{"id":"httpRawResponse","key":"httpRawResponse","label":"原始响应","description":"HTTP请求的原始响应。只能接受字符串或JSON类型响应数据。","valueType":"any","type":"static"},{"id":"pQ4V0PyrcBda","type":"dynamic","key":"result.data","valueType":"any","label":"result.data"},{"id":"wFbxezL1Q7qc","type":"dynamic","key":"result.edata","valueType":"string","label":"result.edata"}]},{"nodeId":"ghzPXt91FbpG","name":"变量更新","intro":"可以更新指定节点的输出值或更新全局变量","avatar":"/imgs/workflow/variable.png","flowNodeType":"variableUpdate","showStatus":true,"position":{"x":2185.5082055072526,"y":4083.745867164044},"inputs":[{"key":"updateList","valueType":"any","label":"","renderTypeList":["hidden"],"editField":{"key":true,"valueType":true},"value":[{"variable":["ajf6ylqLwekI","e4SLaTQ5UnXQ"],"value":["ijEgxCR04AVx","pQ4V0PyrcBda"],"valueType":"any","renderType":"reference"}]}],"outputs":[]},{"nodeId":"zgh3QCahgXcS","name":"设置过期时间","intro":"可以发出一个 HTTP 请求，实现更为复杂的操作（联网搜索、数据库查询等）","avatar":"/imgs/workflow/http.png","flowNodeType":"httpRequest468","showStatus":true,"position":{"x":2825.560233930044,"y":2180.556772053452},"inputs":[{"key":"system_addInputParam","renderTypeList":["addInputParam"],"valueType":"dynamic","label":"","required":false,"description":"core.module.input.description.HTTP Dynamic Input","editField":{"key":true,"valueType":true}},{"key":"key","valueType":"string","label":"key","renderTypeList":["reference"],"description":"","canEdit":true,"editField":{"key":true,"valueType":true},"value":["qUvHabyG2aHI","pQ4V0PyrcBda"]},{"key":"system_httpMethod","renderTypeList":["custom"],"valueType":"string","label":"","value":"POST","required":true},{"key":"system_httpReqUrl","renderTypeList":["hidden"],"valueType":"string","label":"","description":"core.module.input.description.Http Request Url","placeholder":"https://api.ai.com/getInventory","required":false,"value":"http://proxy.io:8888/redis"},{"key":"system_httpHeader","renderTypeList":["custom"],"valueType":"any","value":[{"key":"Content-Type","type":"string","value":"text/plain"}],"label":"","description":"core.module.input.description.Http Request Header","placeholder":"core.module.input.description.Http Request Header","required":false},{"key":"system_httpParams","renderTypeList":["hidden"],"valueType":"any","value":[],"label":"","required":false},{"key":"system_httpJsonBody","renderTypeList":["hidden"],"valueType":"any","value":"EXPIRE/{{key}}/1800","label":"","required":false}],"outputs":[{"id":"system_addOutputParam","key":"system_addOutputParam","type":"dynamic","valueType":"dynamic","label":"","editField":{"key":true,"valueType":true}},{"id":"httpRawResponse","key":"httpRawResponse","label":"原始响应","description":"HTTP请求的原始响应。只能接受字符串或JSON类型响应数据。","valueType":"any","type":"static"}]},{"nodeId":"zi6mddYWREQG","name":"REDIS SET","intro":"","avatar":"/api/system/img/662e480c6cf719ed834fe879","flowNodeType":"pluginModule","showStatus":true,"position":{"x":2877.0796573245393,"y":3252.1074386323194},"inputs":[{"key":"key","valueType":"string","label":"key","renderTypeList":["reference"],"description":"","canEdit":false,"editField":{"key":true},"value":["qUvHabyG2aHI","pQ4V0PyrcBda"]},{"key":"value","valueType":"string","label":"value","renderTypeList":["reference"],"description":"","canEdit":false,"editField":{"key":true},"value":["ijEgxCR04AVx","wFbxezL1Q7qc"]},{"key":"exp","valueType":"number","label":"exp","renderTypeList":["numberInput"],"description":"","canEdit":false,"value":1800,"editField":{"key":true},"maxLength":"","max":"1800","min":"0"}],"outputs":[],"pluginId":"662de9eb6cf719ed834fe418"}],"edges":[{"source":"zpdabsjro3jl","target":"qUvHabyG2aHI","sourceHandle":"zpdabsjro3jl-source-right","targetHandle":"qUvHabyG2aHI-target-left"},{"source":"qUvHabyG2aHI","target":"kkJJWdghAlNP","sourceHandle":"qUvHabyG2aHI-source-right","targetHandle":"kkJJWdghAlNP-target-left"},{"source":"kkJJWdghAlNP","target":"ajf6ylqLwekI","sourceHandle":"kkJJWdghAlNP-source-right","targetHandle":"ajf6ylqLwekI-target-left"},{"source":"ajf6ylqLwekI","target":"wK68Zr8qrB0w","sourceHandle":"ajf6ylqLwekI-source-bottom","targetHandle":"wK68Zr8qrB0w-target-top"},{"source":"wK68Zr8qrB0w","target":"ci29O7VmVn5g","sourceHandle":"wK68Zr8qrB0w-source-ELSE","targetHandle":"ci29O7VmVn5g-target-top"},{"source":"ci29O7VmVn5g","target":"ijEgxCR04AVx","sourceHandle":"ci29O7VmVn5g-source-right","targetHandle":"ijEgxCR04AVx-target-left"},{"source":"wK68Zr8qrB0w","target":"24u067o1vh6c","sourceHandle":"wK68Zr8qrB0w-source-IF","targetHandle":"24u067o1vh6c-target-left"},{"source":"ijEgxCR04AVx","target":"ghzPXt91FbpG","sourceHandle":"ijEgxCR04AVx-source-bottom","targetHandle":"ghzPXt91FbpG-target-top"},{"source":"ghzPXt91FbpG","target":"24u067o1vh6c","sourceHandle":"ghzPXt91FbpG-source-right","targetHandle":"24u067o1vh6c-target-left"},{"source":"ijEgxCR04AVx","target":"zi6mddYWREQG","sourceHandle":"ijEgxCR04AVx-source-right","targetHandle":"zi6mddYWREQG-target-left"},{"source":"wK68Zr8qrB0w","target":"zgh3QCahgXcS","sourceHandle":"wK68Zr8qrB0w-source-IF","targetHandle":"zgh3QCahgXcS-target-left"}]}
```

其中，

http模块内的 `http://proxy.io:8888/laf/eval` 地址改为实际的 `apis` 服务地址

http模块内的 `http://proxy.io:8888/redis` 地址改为实际的 `apis` 服务地址
